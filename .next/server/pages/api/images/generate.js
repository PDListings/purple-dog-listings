"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/images/generate";
exports.ids = ["pages/api/images/generate"];
exports.modules = {

/***/ "cloudinary":
/*!*****************************!*\
  !*** external "cloudinary" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("cloudinary");

/***/ }),

/***/ "joi":
/*!**********************!*\
  !*** external "joi" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("joi");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

module.exports = require("sharp");

/***/ }),

/***/ "winston":
/*!**************************!*\
  !*** external "winston" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("winston");

/***/ }),

/***/ "winston-daily-rotate-file":
/*!********************************************!*\
  !*** external "winston-daily-rotate-file" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("winston-daily-rotate-file");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "next-rate-limit":
/*!**********************************!*\
  !*** external "next-rate-limit" ***!
  \**********************************/
/***/ ((module) => {

module.exports = import("next-rate-limit");;

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fimages%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fimages%2Fgenerate.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fimages%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fimages%2Fgenerate.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_images_generate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/images/generate.js */ \"(api)/./src/pages/api/images/generate.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_images_generate_js__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_images_generate_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_images_generate_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_images_generate_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/images/generate\",\n        pathname: \"/api/images/generate\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_images_generate_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmltYWdlcyUyRmdlbmVyYXRlJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZpbWFnZXMlMkZnZW5lcmF0ZS5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUMrRDtBQUMvRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsOERBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDhEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL3B1cnBsZS1kb2ctbGlzdGluZ3MvP2Y3MWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvaW1hZ2VzL2dlbmVyYXRlLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvaW1hZ2VzL2dlbmVyYXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvaW1hZ2VzL2dlbmVyYXRlXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fimages%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fimages%2Fgenerate.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./backend/api/images/generate.js":
/*!****************************************!*\
  !*** ./backend/api/images/generate.js ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sharp */ \"sharp\");\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(sharp__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! cloudinary */ \"cloudinary\");\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(cloudinary__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_rate_limit__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next-rate-limit */ \"next-rate-limit\");\n/* harmony import */ var _backend_utils_logger__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/backend/utils/logger */ \"(api)/./backend/utils/logger.js\");\n/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! joi */ \"joi\");\n/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(joi__WEBPACK_IMPORTED_MODULE_8__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_0__, openai__WEBPACK_IMPORTED_MODULE_2__, next_rate_limit__WEBPACK_IMPORTED_MODULE_6__]);\n([formidable__WEBPACK_IMPORTED_MODULE_0__, openai__WEBPACK_IMPORTED_MODULE_2__, next_rate_limit__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n// Disable default body parsing by Next.js\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n// Constants\nconst TMP_DIR = process.env.TMP_DIR || \"./tmp\";\nconst CLOUDINARY_FOLDER = \"pdl/generated\";\nconst MAX_FILE_SIZE_MB = 5;\nconst ALLOWED_TYPES = [\n    \"image/png\",\n    \"image/jpeg\",\n    \"image/jpg\"\n];\nconst ERRORS = {\n    MISSING_FIELDS: \"Missing required fields. Ensure 'style', 'category', and 'roomType' are provided.\",\n    INVALID_FILE_TYPE: \"Unsupported image type. Only PNG and JPEG are accepted.\",\n    FILE_TOO_LARGE: `File too large. Maximum size is ${MAX_FILE_SIZE_MB}MB.`\n};\n// Environment validation\nif (!process.env.CLOUDINARY_CLOUD_NAME || !process.env.CLOUDINARY_API_KEY || !process.env.CLOUDINARY_API_SECRET || !process.env.OPENAI_API_KEY) {\n    throw new Error(\"Missing required environment variables\");\n}\n// Configure Cloudinary\ncloudinary__WEBPACK_IMPORTED_MODULE_3__.v2.config({\n    cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n    api_key: process.env.CLOUDINARY_API_KEY,\n    api_secret: process.env.CLOUDINARY_API_SECRET\n});\n// Configure OpenAI\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\n// Configure rate limiter\nconst rateLimiter = (0,next_rate_limit__WEBPACK_IMPORTED_MODULE_6__[\"default\"])({\n    limit: 100,\n    interval: 15 * 60 * 1000\n});\n// Schema validation for input fields\nconst fieldsSchema = joi__WEBPACK_IMPORTED_MODULE_8___default().object({\n    style: joi__WEBPACK_IMPORTED_MODULE_8___default().string().required(),\n    category: joi__WEBPACK_IMPORTED_MODULE_8___default().string().required(),\n    roomType: joi__WEBPACK_IMPORTED_MODULE_8___default().string().required(),\n    features: joi__WEBPACK_IMPORTED_MODULE_8___default().string().optional()\n});\n// Ensure tmp directory exists and is writable\nconst ensureTmpDir = async ()=>{\n    try {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_5___default().mkdir(TMP_DIR, {\n            recursive: true\n        });\n        await fs_promises__WEBPACK_IMPORTED_MODULE_5___default().access(TMP_DIR, (fs_promises__WEBPACK_IMPORTED_MODULE_5___default().constants).W_OK);\n    } catch (err) {\n        _backend_utils_logger__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"âŒ Cannot write to TMP directory. Check permissions.\");\n        throw new Error(\"TMP directory not writable\");\n    }\n};\n// Handle file uploads\nconst parseForm = (req)=>new Promise((resolve, reject)=>{\n        const form = new formidable__WEBPACK_IMPORTED_MODULE_0__.IncomingForm({\n            keepExtensions: true\n        });\n        form.uploadDir = TMP_DIR;\n        form.parse(req, (err, fields, files)=>{\n            if (err) reject(err);\n            else resolve({\n                fields,\n                files\n            });\n        });\n    });\n// Main handler\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        await rateLimiter(req, res);\n        if (res.headersSent) {\n            _backend_utils_logger__WEBPACK_IMPORTED_MODULE_7__[\"default\"].warn(\"Rate limit triggered. Request was blocked.\");\n            return;\n        }\n    } catch (rateErr) {\n        _backend_utils_logger__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"Rate limiter error:\", rateErr);\n        return res.status(500).json({\n            error: \"Rate limiting failed.\"\n        });\n    }\n    try {\n        await ensureTmpDir();\n        const { fields, files } = await parseForm(req);\n        _backend_utils_logger__WEBPACK_IMPORTED_MODULE_7__[\"default\"].info(\"User input fields:\", fields);\n        // Validate input\n        const { error, value: validatedFields } = fieldsSchema.validate(fields);\n        if (error) {\n            return res.status(400).json({\n                error: error.details[0].message\n            });\n        }\n        const imageFile = files.image;\n        const filePath = imageFile?.filepath || imageFile?.path;\n        if (!imageFile || !filePath || typeof imageFile !== \"object\") {\n            return res.status(400).json({\n                error: \"No valid image file uploaded.\"\n            });\n        }\n        if (!ALLOWED_TYPES.includes(imageFile.mimetype)) {\n            return res.status(400).json({\n                error: ERRORS.INVALID_FILE_TYPE\n            });\n        }\n        if (imageFile.size > MAX_FILE_SIZE_MB * 1024 * 1024) {\n            return res.status(400).json({\n                error: ERRORS.FILE_TOO_LARGE\n            });\n        }\n        // Parse features\n        let featuresList = [];\n        try {\n            featuresList = JSON.parse(validatedFields.features || \"[]\");\n        } catch  {\n            _backend_utils_logger__WEBPACK_IMPORTED_MODULE_7__[\"default\"].warn(\"Invalid features format. Defaulting to empty list.\");\n        }\n        // Resize & convert image\n        const inputBuffer = await sharp__WEBPACK_IMPORTED_MODULE_1___default()(filePath).resize(1024, 1024, {\n            fit: \"contain\",\n            background: {\n                r: 0,\n                g: 0,\n                b: 0,\n                alpha: 0\n            }\n        }).png().toBuffer();\n        await fs_promises__WEBPACK_IMPORTED_MODULE_5___default().unlink(filePath); // Cleanup\n        // Upload to Cloudinary\n        const uploadResult = await new Promise((resolve, reject)=>{\n            const stream = cloudinary__WEBPACK_IMPORTED_MODULE_3__.v2.uploader.upload_stream({\n                folder: CLOUDINARY_FOLDER,\n                resource_type: \"image\",\n                format: \"png\"\n            }, (err, result)=>err ? reject(err) : resolve(result));\n            stream__WEBPACK_IMPORTED_MODULE_4__.Readable.from(inputBuffer).pipe(stream);\n        });\n        // Generate prompt\n        const featuresText = featuresList.length > 0 ? featuresList.join(\", \") : \"no specific features\";\n        const prompt = `Create a ${validatedFields.style} ${validatedFields.category} design for a ${validatedFields.roomType} that includes ${featuresText}`;\n        _backend_utils_logger__WEBPACK_IMPORTED_MODULE_7__[\"default\"].info(`ðŸ§  Prompt to OpenAI: ${prompt}`);\n        // Call OpenAI\n        const aiResponse = await openai.images.generate({\n            prompt,\n            n: 1,\n            size: \"1024x1024\",\n            response_format: \"url\"\n        });\n        const imageUrl = aiResponse?.data?.[0]?.url;\n        if (!imageUrl) {\n            _backend_utils_logger__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"OpenAI API did not return a valid URL\", {\n                response: aiResponse?.data\n            });\n            return res.status(500).json({\n                error: \"Failed to generate AI image. No valid response from OpenAI.\"\n            });\n        }\n        _backend_utils_logger__WEBPACK_IMPORTED_MODULE_7__[\"default\"].info(\"âœ… File uploaded to Cloudinary\", {\n            url: uploadResult.secure_url\n        });\n        _backend_utils_logger__WEBPACK_IMPORTED_MODULE_7__[\"default\"].info(\"âœ… Generated AI Image URL\", {\n            url: imageUrl\n        });\n        return res.status(200).json({\n            status: \"success\",\n            uploadedUrl: uploadResult.secure_url,\n            aiGeneratedUrl: imageUrl,\n            prompt,\n            originalName: imageFile.originalFilename || \"uploaded-image\",\n            createdAt: new Date().toISOString()\n        });\n    } catch (err) {\n        _backend_utils_logger__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(`âŒ Error processing image: ${err.message}`, {\n            stack: err.stack\n        });\n        return res.status(500).json({\n            error: \"Image generation failed\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9iYWNrZW5kL2FwaS9pbWFnZXMvZ2VuZXJhdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwQztBQUNoQjtBQUNFO0FBQ2tCO0FBQ1o7QUFDTDtBQUNlO0FBQ0E7QUFDdEI7QUFFdEIsMENBQTBDO0FBQ25DLE1BQU1VLFNBQVM7SUFDcEJDLEtBQUs7UUFBRUMsWUFBWTtJQUFNO0FBQzNCLEVBQUU7QUFFRixZQUFZO0FBQ1osTUFBTUMsVUFBVUMsUUFBUUMsR0FBRyxDQUFDRixPQUFPLElBQUk7QUFDdkMsTUFBTUcsb0JBQW9CO0FBQzFCLE1BQU1DLG1CQUFtQjtBQUN6QixNQUFNQyxnQkFBZ0I7SUFBQztJQUFhO0lBQWM7Q0FBWTtBQUM5RCxNQUFNQyxTQUFTO0lBQ2JDLGdCQUFnQjtJQUNoQkMsbUJBQW1CO0lBQ25CQyxnQkFBZ0IsQ0FBQyxnQ0FBZ0MsRUFBRUwsaUJBQWlCLEdBQUcsQ0FBQztBQUMxRTtBQUVBLHlCQUF5QjtBQUN6QixJQUFJLENBQUNILFFBQVFDLEdBQUcsQ0FBQ1EscUJBQXFCLElBQUksQ0FBQ1QsUUFBUUMsR0FBRyxDQUFDUyxrQkFBa0IsSUFBSSxDQUFDVixRQUFRQyxHQUFHLENBQUNVLHFCQUFxQixJQUFJLENBQUNYLFFBQVFDLEdBQUcsQ0FBQ1csY0FBYyxFQUFFO0lBQzlJLE1BQU0sSUFBSUMsTUFBTTtBQUNsQjtBQUVBLHVCQUF1QjtBQUN2QnZCLDBDQUFVQSxDQUFDTSxNQUFNLENBQUM7SUFDaEJrQixZQUFZZCxRQUFRQyxHQUFHLENBQUNRLHFCQUFxQjtJQUM3Q00sU0FBU2YsUUFBUUMsR0FBRyxDQUFDUyxrQkFBa0I7SUFDdkNNLFlBQVloQixRQUFRQyxHQUFHLENBQUNVLHFCQUFxQjtBQUMvQztBQUVBLG1CQUFtQjtBQUNuQixNQUFNTSxTQUFTLElBQUk3Qiw4Q0FBTUEsQ0FBQztJQUFFOEIsUUFBUWxCLFFBQVFDLEdBQUcsQ0FBQ1csY0FBYztBQUFDO0FBRS9ELHlCQUF5QjtBQUN6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QUU1QyxjQUFjO1FBQ2QsTUFBTUMsYUFBYSxNQUFNbEYsT0FBT21GLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDO1lBQzlDSDtZQUNBSSxHQUFHO1lBQ0gvQixNQUFNO1lBQ05nQyxpQkFBaUI7UUFDbkI7UUFFQSxNQUFNQyxXQUFXTCxZQUFZTSxNQUFNLENBQUMsRUFBRSxFQUFFQztRQUN4QyxJQUFJLENBQUNGLFVBQVU7WUFDYjlHLG1FQUFZLENBQUMseUNBQXlDO2dCQUFFaUgsVUFBVVIsWUFBWU07WUFBSztZQUNuRixPQUFPdEQsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRWhCLE9BQU87WUFBOEQ7UUFDckc7UUFFQTVDLGtFQUFXLENBQUMsaUNBQWlDO1lBQUVnSCxLQUFLckIsYUFBYXVCLFVBQVU7UUFBQztRQUM1RWxILGtFQUFXLENBQUMsNEJBQTRCO1lBQUVnSCxLQUFLRjtRQUFTO1FBRXhELE9BQU9yRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCRCxRQUFRO1lBQ1J3RCxhQUFheEIsYUFBYXVCLFVBQVU7WUFDcENFLGdCQUFnQk47WUFDaEJOO1lBQ0FhLGNBQWMvQyxVQUFVZ0QsZ0JBQWdCLElBQUk7WUFDNUNDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQztJQUNGLEVBQUUsT0FBTzlFLEtBQUs7UUFDWjNDLG1FQUFZLENBQUMsQ0FBQywwQkFBMEIsRUFBRTJDLElBQUkwQixPQUFPLENBQUMsQ0FBQyxFQUFFO1lBQUVxRCxPQUFPL0UsSUFBSStFLEtBQUs7UUFBQztRQUM1RSxPQUFPakUsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFaEIsT0FBTztRQUEwQjtJQUNqRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHVycGxlLWRvZy1saXN0aW5ncy8uL2JhY2tlbmQvYXBpL2ltYWdlcy9nZW5lcmF0ZS5qcz84Y2ZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluY29taW5nRm9ybSB9IGZyb20gXCJmb3JtaWRhYmxlXCI7XG5pbXBvcnQgc2hhcnAgZnJvbSBcInNoYXJwXCI7XG5pbXBvcnQgT3BlbkFJIGZyb20gXCJvcGVuYWlcIjtcbmltcG9ydCB7IHYyIGFzIGNsb3VkaW5hcnkgfSBmcm9tIFwiY2xvdWRpbmFyeVwiO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tIFwic3RyZWFtXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzL3Byb21pc2VzXCI7XG5pbXBvcnQgbmV4dFJhdGVMaW1pdCBmcm9tIFwibmV4dC1yYXRlLWxpbWl0XCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCJAL2JhY2tlbmQvdXRpbHMvbG9nZ2VyXCI7XG5pbXBvcnQgSm9pIGZyb20gXCJqb2lcIjtcblxuLy8gRGlzYWJsZSBkZWZhdWx0IGJvZHkgcGFyc2luZyBieSBOZXh0LmpzXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBhcGk6IHsgYm9keVBhcnNlcjogZmFsc2UgfSxcbn07XG5cbi8vIENvbnN0YW50c1xuY29uc3QgVE1QX0RJUiA9IHByb2Nlc3MuZW52LlRNUF9ESVIgfHwgXCIuL3RtcFwiO1xuY29uc3QgQ0xPVURJTkFSWV9GT0xERVIgPSBcInBkbC9nZW5lcmF0ZWRcIjtcbmNvbnN0IE1BWF9GSUxFX1NJWkVfTUIgPSA1O1xuY29uc3QgQUxMT1dFRF9UWVBFUyA9IFtcImltYWdlL3BuZ1wiLCBcImltYWdlL2pwZWdcIiwgXCJpbWFnZS9qcGdcIl07XG5jb25zdCBFUlJPUlMgPSB7XG4gIE1JU1NJTkdfRklFTERTOiBcIk1pc3NpbmcgcmVxdWlyZWQgZmllbGRzLiBFbnN1cmUgJ3N0eWxlJywgJ2NhdGVnb3J5JywgYW5kICdyb29tVHlwZScgYXJlIHByb3ZpZGVkLlwiLFxuICBJTlZBTElEX0ZJTEVfVFlQRTogXCJVbnN1cHBvcnRlZCBpbWFnZSB0eXBlLiBPbmx5IFBORyBhbmQgSlBFRyBhcmUgYWNjZXB0ZWQuXCIsXG4gIEZJTEVfVE9PX0xBUkdFOiBgRmlsZSB0b28gbGFyZ2UuIE1heGltdW0gc2l6ZSBpcyAke01BWF9GSUxFX1NJWkVfTUJ9TUIuYCxcbn07XG5cbi8vIEVudmlyb25tZW50IHZhbGlkYXRpb25cbmlmICghcHJvY2Vzcy5lbnYuQ0xPVURJTkFSWV9DTE9VRF9OQU1FIHx8ICFwcm9jZXNzLmVudi5DTE9VRElOQVJZX0FQSV9LRVkgfHwgIXByb2Nlc3MuZW52LkNMT1VESU5BUllfQVBJX1NFQ1JFVCB8fCAhcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcIik7XG59XG5cbi8vIENvbmZpZ3VyZSBDbG91ZGluYXJ5XG5jbG91ZGluYXJ5LmNvbmZpZyh7XG4gIGNsb3VkX25hbWU6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfQ0xPVURfTkFNRSxcbiAgYXBpX2tleTogcHJvY2Vzcy5lbnYuQ0xPVURJTkFSWV9BUElfS0VZLFxuICBhcGlfc2VjcmV0OiBwcm9jZXNzLmVudi5DTE9VRElOQVJZX0FQSV9TRUNSRVQsXG59KTtcblxuLy8gQ29uZmlndXJlIE9wZW5BSVxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7IGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgfSk7XG5cbi8vIENvbmZpZ3VyZSByYXRlIGxpbWl0ZXJcbmNvbnN0IHJhdGVMaW1pdGVyID0gbmV4dFJhdGVMaW1pdCh7XG4gIGxpbWl0OiAxMDAsXG4gIGludGVydmFsOiAxNSAqIDYwICogMTAwMCxcbn0pO1xuXG4vLyBTY2hlbWEgdmFsaWRhdGlvbiBmb3IgaW5wdXQgZmllbGRzXG5jb25zdCBmaWVsZHNTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgc3R5bGU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBjYXRlZ29yeTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHJvb21UeXBlOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgZmVhdHVyZXM6IEpvaS5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5cbi8vIEVuc3VyZSB0bXAgZGlyZWN0b3J5IGV4aXN0cyBhbmQgaXMgd3JpdGFibGVcbmNvbnN0IGVuc3VyZVRtcERpciA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBmcy5ta2RpcihUTVBfRElSLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICBhd2FpdCBmcy5hY2Nlc3MoVE1QX0RJUiwgZnMuY29uc3RhbnRzLldfT0spO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2dnZXIuZXJyb3IoXCLinYwgQ2Fubm90IHdyaXRlIHRvIFRNUCBkaXJlY3RvcnkuIENoZWNrIHBlcm1pc3Npb25zLlwiKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUTVAgZGlyZWN0b3J5IG5vdCB3cml0YWJsZVwiKTtcbiAgfVxufTtcblxuLy8gSGFuZGxlIGZpbGUgdXBsb2Fkc1xuY29uc3QgcGFyc2VGb3JtID0gKHJlcSkgPT5cbiAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSBuZXcgSW5jb21pbmdGb3JtKHsga2VlcEV4dGVuc2lvbnM6IHRydWUgfSk7XG4gICAgZm9ybS51cGxvYWREaXIgPSBUTVBfRElSO1xuICAgIGZvcm0ucGFyc2UocmVxLCAoZXJyLCBmaWVsZHMsIGZpbGVzKSA9PiB7XG4gICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcbiAgICAgIGVsc2UgcmVzb2x2ZSh7IGZpZWxkcywgZmlsZXMgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4vLyBNYWluIGhhbmRsZXJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09IFwiUE9TVFwiKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6IFwiTWV0aG9kIG5vdCBhbGxvd2VkXCIgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGF3YWl0IHJhdGVMaW1pdGVyKHJlcSwgcmVzKTtcbiAgICBpZiAocmVzLmhlYWRlcnNTZW50KSB7XG4gICAgICBsb2dnZXIud2FybihcIlJhdGUgbGltaXQgdHJpZ2dlcmVkLiBSZXF1ZXN0IHdhcyBibG9ja2VkLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gY2F0Y2ggKHJhdGVFcnIpIHtcbiAgICBsb2dnZXIuZXJyb3IoXCJSYXRlIGxpbWl0ZXIgZXJyb3I6XCIsIHJhdGVFcnIpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIlJhdGUgbGltaXRpbmcgZmFpbGVkLlwiIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCBlbnN1cmVUbXBEaXIoKTtcbiAgICBjb25zdCB7IGZpZWxkcywgZmlsZXMgfSA9IGF3YWl0IHBhcnNlRm9ybShyZXEpO1xuICAgIGxvZ2dlci5pbmZvKFwiVXNlciBpbnB1dCBmaWVsZHM6XCIsIGZpZWxkcyk7XG5cbiAgICAvLyBWYWxpZGF0ZSBpbnB1dFxuICAgIGNvbnN0IHsgZXJyb3IsIHZhbHVlOiB2YWxpZGF0ZWRGaWVsZHMgfSA9IGZpZWxkc1NjaGVtYS52YWxpZGF0ZShmaWVsZHMpO1xuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IGVycm9yLmRldGFpbHNbMF0ubWVzc2FnZSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBpbWFnZUZpbGUgPSBmaWxlcy5pbWFnZTtcbiAgICBjb25zdCBmaWxlUGF0aCA9IGltYWdlRmlsZT8uZmlsZXBhdGggfHwgaW1hZ2VGaWxlPy5wYXRoO1xuXG4gICAgaWYgKCFpbWFnZUZpbGUgfHwgIWZpbGVQYXRoIHx8IHR5cGVvZiBpbWFnZUZpbGUgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIk5vIHZhbGlkIGltYWdlIGZpbGUgdXBsb2FkZWQuXCIgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFBTExPV0VEX1RZUEVTLmluY2x1ZGVzKGltYWdlRmlsZS5taW1ldHlwZSkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBFUlJPUlMuSU5WQUxJRF9GSUxFX1RZUEUgfSk7XG4gICAgfVxuXG4gICAgaWYgKGltYWdlRmlsZS5zaXplID4gTUFYX0ZJTEVfU0laRV9NQiAqIDEwMjQgKiAxMDI0KSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogRVJST1JTLkZJTEVfVE9PX0xBUkdFIH0pO1xuICAgIH1cblxuICAgIC8vIFBhcnNlIGZlYXR1cmVzXG4gICAgbGV0IGZlYXR1cmVzTGlzdCA9IFtdO1xuICAgIHRyeSB7XG4gICAgICBmZWF0dXJlc0xpc3QgPSBKU09OLnBhcnNlKHZhbGlkYXRlZEZpZWxkcy5mZWF0dXJlcyB8fCBcIltdXCIpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgbG9nZ2VyLndhcm4oXCJJbnZhbGlkIGZlYXR1cmVzIGZvcm1hdC4gRGVmYXVsdGluZyB0byBlbXB0eSBsaXN0LlwiKTtcbiAgICB9XG5cbiAgICAvLyBSZXNpemUgJiBjb252ZXJ0IGltYWdlXG4gICAgY29uc3QgaW5wdXRCdWZmZXIgPSBhd2FpdCBzaGFycChmaWxlUGF0aClcbiAgICAgIC5yZXNpemUoMTAyNCwgMTAyNCwge1xuICAgICAgICBmaXQ6IFwiY29udGFpblwiLFxuICAgICAgICBiYWNrZ3JvdW5kOiB7IHI6IDAsIGc6IDAsIGI6IDAsIGFscGhhOiAwIH0sXG4gICAgICB9KVxuICAgICAgLnBuZygpXG4gICAgICAudG9CdWZmZXIoKTtcblxuICAgIGF3YWl0IGZzLnVubGluayhmaWxlUGF0aCk7IC8vIENsZWFudXBcblxuICAgIC8vIFVwbG9hZCB0byBDbG91ZGluYXJ5XG4gICAgY29uc3QgdXBsb2FkUmVzdWx0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgc3RyZWFtID0gY2xvdWRpbmFyeS51cGxvYWRlci51cGxvYWRfc3RyZWFtKFxuICAgICAgICB7XG4gICAgICAgICAgZm9sZGVyOiBDTE9VRElOQVJZX0ZPTERFUixcbiAgICAgICAgICByZXNvdXJjZV90eXBlOiBcImltYWdlXCIsXG4gICAgICAgICAgZm9ybWF0OiBcInBuZ1wiLFxuICAgICAgICB9LFxuICAgICAgICAoZXJyLCByZXN1bHQpID0+IChlcnIgPyByZWplY3QoZXJyKSA6IHJlc29sdmUocmVzdWx0KSlcbiAgICAgICk7XG4gICAgICBSZWFkYWJsZS5mcm9tKGlucHV0QnVmZmVyKS5waXBlKHN0cmVhbSk7XG4gICAgfSk7XG5cbiAgICAvLyBHZW5lcmF0ZSBwcm9tcHRcbiAgICBjb25zdCBmZWF0dXJlc1RleHQgPSBmZWF0dXJlc0xpc3QubGVuZ3RoID4gMCA/IGZlYXR1cmVzTGlzdC5qb2luKFwiLCBcIikgOiBcIm5vIHNwZWNpZmljIGZlYXR1cmVzXCI7XG4gICAgY29uc3QgcHJvbXB0ID0gYENyZWF0ZSBhICR7dmFsaWRhdGVkRmllbGRzLnN0eWxlfSAke3ZhbGlkYXRlZEZpZWxkcy5jYXRlZ29yeX0gZGVzaWduIGZvciBhICR7dmFsaWRhdGVkRmllbGRzLnJvb21UeXBlfSB0aGF0IGluY2x1ZGVzICR7ZmVhdHVyZXNUZXh0fWA7XG4gICAgbG9nZ2VyLmluZm8oYPCfp6AgUHJvbXB0IHRvIE9wZW5BSTogJHtwcm9tcHR9YCk7XG5cbiAgICAvLyBDYWxsIE9wZW5BSVxuICAgIGNvbnN0IGFpUmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuaW1hZ2VzLmdlbmVyYXRlKHtcbiAgICAgIHByb21wdCxcbiAgICAgIG46IDEsXG4gICAgICBzaXplOiBcIjEwMjR4MTAyNFwiLFxuICAgICAgcmVzcG9uc2VfZm9ybWF0OiBcInVybFwiLFxuICAgIH0pO1xuXG4gICAgY29uc3QgaW1hZ2VVcmwgPSBhaVJlc3BvbnNlPy5kYXRhPy5bMF0/LnVybDtcbiAgICBpZiAoIWltYWdlVXJsKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJPcGVuQUkgQVBJIGRpZCBub3QgcmV0dXJuIGEgdmFsaWQgVVJMXCIsIHsgcmVzcG9uc2U6IGFpUmVzcG9uc2U/LmRhdGEgfSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJGYWlsZWQgdG8gZ2VuZXJhdGUgQUkgaW1hZ2UuIE5vIHZhbGlkIHJlc3BvbnNlIGZyb20gT3BlbkFJLlwiIH0pO1xuICAgIH1cblxuICAgIGxvZ2dlci5pbmZvKFwi4pyFIEZpbGUgdXBsb2FkZWQgdG8gQ2xvdWRpbmFyeVwiLCB7IHVybDogdXBsb2FkUmVzdWx0LnNlY3VyZV91cmwgfSk7XG4gICAgbG9nZ2VyLmluZm8oXCLinIUgR2VuZXJhdGVkIEFJIEltYWdlIFVSTFwiLCB7IHVybDogaW1hZ2VVcmwgfSk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgIHVwbG9hZGVkVXJsOiB1cGxvYWRSZXN1bHQuc2VjdXJlX3VybCxcbiAgICAgIGFpR2VuZXJhdGVkVXJsOiBpbWFnZVVybCxcbiAgICAgIHByb21wdCxcbiAgICAgIG9yaWdpbmFsTmFtZTogaW1hZ2VGaWxlLm9yaWdpbmFsRmlsZW5hbWUgfHwgXCJ1cGxvYWRlZC1pbWFnZVwiLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZ2dlci5lcnJvcihg4p2MIEVycm9yIHByb2Nlc3NpbmcgaW1hZ2U6ICR7ZXJyLm1lc3NhZ2V9YCwgeyBzdGFjazogZXJyLnN0YWNrIH0pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkltYWdlIGdlbmVyYXRpb24gZmFpbGVkXCIgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiSW5jb21pbmdGb3JtIiwic2hhcnAiLCJPcGVuQUkiLCJ2MiIsImNsb3VkaW5hcnkiLCJSZWFkYWJsZSIsImZzIiwibmV4dFJhdGVMaW1pdCIsImxvZ2dlciIsIkpvaSIsImNvbmZpZyIsImFwaSIsImJvZHlQYXJzZXIiLCJUTVBfRElSIiwicHJvY2VzcyIsImVudiIsIkNMT1VESU5BUllfRk9MREVSIiwiTUFYX0ZJTEVfU0laRV9NQiIsIkFMTE9XRURfVFlQRVMiLCJFUlJPUlMiLCJNSVNTSU5HX0ZJRUxEUyIsIklOVkFMSURfRklMRV9UWVBFIiwiRklMRV9UT09fTEFSR0UiLCJDTE9VRElOQVJZX0NMT1VEX05BTUUiLCJDTE9VRElOQVJZX0FQSV9LRVkiLCJDTE9VRElOQVJZX0FQSV9TRUNSRVQiLCJPUEVOQUlfQVBJX0tFWSIsIkVycm9yIiwiY2xvdWRfbmFtZSIsImFwaV9rZXkiLCJhcGlfc2VjcmV0Iiwib3BlbmFpIiwiYXBpS2V5IiwicmF0ZUxpbWl0ZXIiLCJsaW1pdCIsImludGVydmFsIiwiZmllbGRzU2NoZW1hIiwib2JqZWN0Iiwic3R5bGUiLCJzdHJpbmciLCJyZXF1aXJlZCIsImNhdGVnb3J5Iiwicm9vbVR5cGUiLCJmZWF0dXJlcyIsIm9wdGlvbmFsIiwiZW5zdXJlVG1wRGlyIiwibWtkaXIiLCJyZWN1cnNpdmUiLCJhY2Nlc3MiLCJjb25zdGFudHMiLCJXX09LIiwiZXJyIiwiZXJyb3IiLCJwYXJzZUZvcm0iLCJyZXEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZvcm0iLCJrZWVwRXh0ZW5zaW9ucyIsInVwbG9hZERpciIsInBhcnNlIiwiZmllbGRzIiwiZmlsZXMiLCJoYW5kbGVyIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImhlYWRlcnNTZW50Iiwid2FybiIsInJhdGVFcnIiLCJpbmZvIiwidmFsdWUiLCJ2YWxpZGF0ZWRGaWVsZHMiLCJ2YWxpZGF0ZSIsImRldGFpbHMiLCJtZXNzYWdlIiwiaW1hZ2VGaWxlIiwiaW1hZ2UiLCJmaWxlUGF0aCIsImZpbGVwYXRoIiwicGF0aCIsImluY2x1ZGVzIiwibWltZXR5cGUiLCJzaXplIiwiZmVhdHVyZXNMaXN0IiwiSlNPTiIsImlucHV0QnVmZmVyIiwicmVzaXplIiwiZml0IiwiYmFja2dyb3VuZCIsInIiLCJnIiwiYiIsImFscGhhIiwicG5nIiwidG9CdWZmZXIiLCJ1bmxpbmsiLCJ1cGxvYWRSZXN1bHQiLCJzdHJlYW0iLCJ1cGxvYWRlciIsInVwbG9hZF9zdHJlYW0iLCJmb2xkZXIiLCJyZXNvdXJjZV90eXBlIiwiZm9ybWF0IiwicmVzdWx0IiwiZnJvbSIsInBpcGUiLCJmZWF0dXJlc1RleHQiLCJsZW5ndGgiLCJqb2luIiwicHJvbXB0IiwiYWlSZXNwb25zZSIsImltYWdlcyIsImdlbmVyYXRlIiwibiIsInJlc3BvbnNlX2Zvcm1hdCIsImltYWdlVXJsIiwiZGF0YSIsInVybCIsInJlc3BvbnNlIiwic2VjdXJlX3VybCIsInVwbG9hZGVkVXJsIiwiYWlHZW5lcmF0ZWRVcmwiLCJvcmlnaW5hbE5hbWUiLCJvcmlnaW5hbEZpbGVuYW1lIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3RhY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./backend/api/images/generate.js\n");

/***/ }),

/***/ "(api)/./backend/utils/logger.js":
/*!*********************************!*\
  !*** ./backend/utils/logger.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var winston__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! winston */ \"winston\");\n/* harmony import */ var winston__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(winston__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var winston_daily_rotate_file__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! winston-daily-rotate-file */ \"winston-daily-rotate-file\");\n/* harmony import */ var winston_daily_rotate_file__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(winston_daily_rotate_file__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n// Use LOG_DIR environment variable or default to \"logs\"\nconst logDir = process.env.LOG_DIR || path__WEBPACK_IMPORTED_MODULE_1___default().resolve(\"logs\");\n// Safe directory creation\ntry {\n    if (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(logDir)) {\n        fs__WEBPACK_IMPORTED_MODULE_2___default().mkdirSync(logDir, {\n            recursive: true\n        });\n    }\n} catch (err) {\n    console.error(\"âŒ Failed to create log directory:\", err);\n    process.exit(1); // Exit the process to prevent further issues\n}\n// Determine log level\nconst logLevel = process.env.LOG_LEVEL || \"info\";\nif (!process.env.LOG_LEVEL) {\n    console.warn(\"âš ï¸ LOG_LEVEL is not set. Defaulting to 'info'.\");\n}\n// Create Winston logger\nconst logger = winston__WEBPACK_IMPORTED_MODULE_0___default().createLogger({\n    level: logLevel,\n    format: winston__WEBPACK_IMPORTED_MODULE_0___default().format.combine(winston__WEBPACK_IMPORTED_MODULE_0___default().format.timestamp(), winston__WEBPACK_IMPORTED_MODULE_0___default().format.errors({\n        stack: true\n    }), winston__WEBPACK_IMPORTED_MODULE_0___default().format.json()),\n    transports: [\n        // Log rotation for error logs\n        new (winston_daily_rotate_file__WEBPACK_IMPORTED_MODULE_3___default())({\n            dirname: logDir,\n            filename: \"error-%DATE%.log\",\n            datePattern: \"YYYY-MM-DD\",\n            level: \"error\",\n            maxSize: \"20m\",\n            maxFiles: \"14d\"\n        }),\n        // Log rotation for combined logs\n        new (winston_daily_rotate_file__WEBPACK_IMPORTED_MODULE_3___default())({\n            dirname: logDir,\n            filename: \"combined-%DATE%.log\",\n            datePattern: \"YYYY-MM-DD\",\n            maxSize: \"20m\",\n            maxFiles: \"14d\"\n        })\n    ]\n});\n// Add console transport only in development\nif (true) {\n    logger.add(new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).Console({\n        format: winston__WEBPACK_IMPORTED_MODULE_0___default().format.combine(winston__WEBPACK_IMPORTED_MODULE_0___default().format.colorize(), winston__WEBPACK_IMPORTED_MODULE_0___default().format.timestamp({\n            format: \"YYYY-MM-DD HH:mm:ss\"\n        }), winston__WEBPACK_IMPORTED_MODULE_0___default().format.printf(({ timestamp, level, message })=>{\n            return `${timestamp} [${level}]: ${message}`;\n        }))\n    }));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9iYWNrZW5kL3V0aWxzL2xvZ2dlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBOEI7QUFDTjtBQUNKO0FBQ29DO0FBRXhELHdEQUF3RDtBQUN4RCxNQUFNSSxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLE9BQU8sSUFBSU4sbURBQVksQ0FBQztBQUVuRCwwQkFBMEI7QUFDMUIsSUFBSTtJQUNGLElBQUksQ0FBQ0Msb0RBQWEsQ0FBQ0UsU0FBUztRQUMxQkYsbURBQVksQ0FBQ0UsUUFBUTtZQUFFTyxXQUFXO1FBQUs7SUFDekM7QUFDRixFQUFFLE9BQU9DLEtBQUs7SUFDWkMsUUFBUUMsS0FBSyxDQUFDLHFDQUFxQ0Y7SUFDbkRQLFFBQVFVLElBQUksQ0FBQyxJQUFJLDZDQUE2QztBQUNoRTtBQUVBLHNCQUFzQjtBQUN0QixNQUFNQyxXQUFXWCxRQUFRQyxHQUFHLENBQUNXLFNBQVMsSUFBSTtBQUMxQyxJQUFJLENBQUNaLFFBQVFDLEdBQUcsQ0FBQ1csU0FBUyxFQUFFO0lBQzFCSixRQUFRSyxJQUFJLENBQUM7QUFDZjtBQUVBLHdCQUF3QjtBQUN4QixNQUFNQyxTQUFTbkIsMkRBQW9CLENBQUM7SUFDbENxQixPQUFPTDtJQUNQTSxRQUFRdEIscURBQWMsQ0FBQ3VCLE9BQU8sQ0FDNUJ2QixxREFBYyxDQUFDd0IsU0FBUyxJQUN4QnhCLHFEQUFjLENBQUN5QixNQUFNLENBQUM7UUFBRUMsT0FBTztJQUFLLElBQ3BDMUIscURBQWMsQ0FBQzJCLElBQUk7SUFFckJDLFlBQVk7UUFDViw4QkFBOEI7UUFDOUIsSUFBSXpCLGtFQUFlQSxDQUFDO1lBQ2xCMEIsU0FBU3pCO1lBQ1QwQixVQUFVO1lBQ1ZDLGFBQWE7WUFDYlYsT0FBTztZQUNQVyxTQUFTO1lBQ1RDLFVBQVU7UUFDWjtRQUNBLGlDQUFpQztRQUNqQyxJQUFJOUIsa0VBQWVBLENBQUM7WUFDbEIwQixTQUFTekI7WUFDVDBCLFVBQVU7WUFDVkMsYUFBYTtZQUNiQyxTQUFTO1lBQ1RDLFVBQVU7UUFDWjtLQUNEO0FBQ0g7QUFFQSw0Q0FBNEM7QUFDNUMsSUFBSTVCLElBQXFDLEVBQUU7SUFDekNjLE9BQU9lLEdBQUcsQ0FDUixJQUFJbEMsMkRBQWtCLENBQUNtQyxPQUFPLENBQUM7UUFDN0JiLFFBQVF0QixxREFBYyxDQUFDdUIsT0FBTyxDQUM1QnZCLHFEQUFjLENBQUNvQyxRQUFRLElBQ3ZCcEMscURBQWMsQ0FBQ3dCLFNBQVMsQ0FBQztZQUFFRixRQUFRO1FBQXNCLElBQ3pEdEIscURBQWMsQ0FBQ3FDLE1BQU0sQ0FBQyxDQUFDLEVBQUViLFNBQVMsRUFBRUgsS0FBSyxFQUFFaUIsT0FBTyxFQUFFO1lBQ2xELE9BQU8sQ0FBQyxFQUFFZCxVQUFVLEVBQUUsRUFBRUgsTUFBTSxHQUFHLEVBQUVpQixRQUFRLENBQUM7UUFDOUM7SUFFSjtBQUVKO0FBRUEsaUVBQWVuQixNQUFNQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHVycGxlLWRvZy1saXN0aW5ncy8uL2JhY2tlbmQvdXRpbHMvbG9nZ2VyLmpzPzY1NWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHdpbnN0b24gZnJvbSBcIndpbnN0b25cIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgRGFpbHlSb3RhdGVGaWxlIGZyb20gXCJ3aW5zdG9uLWRhaWx5LXJvdGF0ZS1maWxlXCI7XG5cbi8vIFVzZSBMT0dfRElSIGVudmlyb25tZW50IHZhcmlhYmxlIG9yIGRlZmF1bHQgdG8gXCJsb2dzXCJcbmNvbnN0IGxvZ0RpciA9IHByb2Nlc3MuZW52LkxPR19ESVIgfHwgcGF0aC5yZXNvbHZlKFwibG9nc1wiKTtcblxuLy8gU2FmZSBkaXJlY3RvcnkgY3JlYXRpb25cbnRyeSB7XG4gIGlmICghZnMuZXhpc3RzU3luYyhsb2dEaXIpKSB7XG4gICAgZnMubWtkaXJTeW5jKGxvZ0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gIH1cbn0gY2F0Y2ggKGVycikge1xuICBjb25zb2xlLmVycm9yKFwi4p2MIEZhaWxlZCB0byBjcmVhdGUgbG9nIGRpcmVjdG9yeTpcIiwgZXJyKTtcbiAgcHJvY2Vzcy5leGl0KDEpOyAvLyBFeGl0IHRoZSBwcm9jZXNzIHRvIHByZXZlbnQgZnVydGhlciBpc3N1ZXNcbn1cblxuLy8gRGV0ZXJtaW5lIGxvZyBsZXZlbFxuY29uc3QgbG9nTGV2ZWwgPSBwcm9jZXNzLmVudi5MT0dfTEVWRUwgfHwgXCJpbmZvXCI7XG5pZiAoIXByb2Nlc3MuZW52LkxPR19MRVZFTCkge1xuICBjb25zb2xlLndhcm4oXCLimqDvuI8gTE9HX0xFVkVMIGlzIG5vdCBzZXQuIERlZmF1bHRpbmcgdG8gJ2luZm8nLlwiKTtcbn1cblxuLy8gQ3JlYXRlIFdpbnN0b24gbG9nZ2VyXG5jb25zdCBsb2dnZXIgPSB3aW5zdG9uLmNyZWF0ZUxvZ2dlcih7XG4gIGxldmVsOiBsb2dMZXZlbCxcbiAgZm9ybWF0OiB3aW5zdG9uLmZvcm1hdC5jb21iaW5lKFxuICAgIHdpbnN0b24uZm9ybWF0LnRpbWVzdGFtcCgpLFxuICAgIHdpbnN0b24uZm9ybWF0LmVycm9ycyh7IHN0YWNrOiB0cnVlIH0pLFxuICAgIHdpbnN0b24uZm9ybWF0Lmpzb24oKVxuICApLFxuICB0cmFuc3BvcnRzOiBbXG4gICAgLy8gTG9nIHJvdGF0aW9uIGZvciBlcnJvciBsb2dzXG4gICAgbmV3IERhaWx5Um90YXRlRmlsZSh7XG4gICAgICBkaXJuYW1lOiBsb2dEaXIsXG4gICAgICBmaWxlbmFtZTogXCJlcnJvci0lREFURSUubG9nXCIsXG4gICAgICBkYXRlUGF0dGVybjogXCJZWVlZLU1NLUREXCIsXG4gICAgICBsZXZlbDogXCJlcnJvclwiLFxuICAgICAgbWF4U2l6ZTogXCIyMG1cIixcbiAgICAgIG1heEZpbGVzOiBcIjE0ZFwiLFxuICAgIH0pLFxuICAgIC8vIExvZyByb3RhdGlvbiBmb3IgY29tYmluZWQgbG9nc1xuICAgIG5ldyBEYWlseVJvdGF0ZUZpbGUoe1xuICAgICAgZGlybmFtZTogbG9nRGlyLFxuICAgICAgZmlsZW5hbWU6IFwiY29tYmluZWQtJURBVEUlLmxvZ1wiLFxuICAgICAgZGF0ZVBhdHRlcm46IFwiWVlZWS1NTS1ERFwiLFxuICAgICAgbWF4U2l6ZTogXCIyMG1cIixcbiAgICAgIG1heEZpbGVzOiBcIjE0ZFwiLFxuICAgIH0pLFxuICBdLFxufSk7XG5cbi8vIEFkZCBjb25zb2xlIHRyYW5zcG9ydCBvbmx5IGluIGRldmVsb3BtZW50XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gIGxvZ2dlci5hZGQoXG4gICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKHtcbiAgICAgIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuY29tYmluZShcbiAgICAgICAgd2luc3Rvbi5mb3JtYXQuY29sb3JpemUoKSxcbiAgICAgICAgd2luc3Rvbi5mb3JtYXQudGltZXN0YW1wKHsgZm9ybWF0OiBcIllZWVktTU0tREQgSEg6bW06c3NcIiB9KSxcbiAgICAgICAgd2luc3Rvbi5mb3JtYXQucHJpbnRmKCh7IHRpbWVzdGFtcCwgbGV2ZWwsIG1lc3NhZ2UgfSkgPT4ge1xuICAgICAgICAgIHJldHVybiBgJHt0aW1lc3RhbXB9IFske2xldmVsfV06ICR7bWVzc2FnZX1gO1xuICAgICAgICB9KVxuICAgICAgKSxcbiAgICB9KVxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7Il0sIm5hbWVzIjpbIndpbnN0b24iLCJwYXRoIiwiZnMiLCJEYWlseVJvdGF0ZUZpbGUiLCJsb2dEaXIiLCJwcm9jZXNzIiwiZW52IiwiTE9HX0RJUiIsInJlc29sdmUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZXhpdCIsImxvZ0xldmVsIiwiTE9HX0xFVkVMIiwid2FybiIsImxvZ2dlciIsImNyZWF0ZUxvZ2dlciIsImxldmVsIiwiZm9ybWF0IiwiY29tYmluZSIsInRpbWVzdGFtcCIsImVycm9ycyIsInN0YWNrIiwianNvbiIsInRyYW5zcG9ydHMiLCJkaXJuYW1lIiwiZmlsZW5hbWUiLCJkYXRlUGF0dGVybiIsIm1heFNpemUiLCJtYXhGaWxlcyIsImFkZCIsIkNvbnNvbGUiLCJjb2xvcml6ZSIsInByaW50ZiIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./backend/utils/logger.js\n");

/***/ }),

/***/ "(api)/./src/pages/api/images/generate.js":
/*!******************************************!*\
  !*** ./src/pages/api/images/generate.js ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _backend_api_images_generate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../backend/api/images/generate.js */ \"(api)/./backend/api/images/generate.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_backend_api_images_generate_js__WEBPACK_IMPORTED_MODULE_0__]);\n_backend_api_images_generate_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// src/pages/api/images/generate.js\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_backend_api_images_generate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2ltYWdlcy9nZW5lcmF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLG1DQUFtQztBQUM4QjtBQUNqRSxpRUFBZUEsdUVBQU9BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wdXJwbGUtZG9nLWxpc3RpbmdzLy4vc3JjL3BhZ2VzL2FwaS9pbWFnZXMvZ2VuZXJhdGUuanM/OTg2OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvcGFnZXMvYXBpL2ltYWdlcy9nZW5lcmF0ZS5qc1xuaW1wb3J0IGhhbmRsZXIgZnJvbSBcIi4uLy4uLy4uLy4uL2JhY2tlbmQvYXBpL2ltYWdlcy9nZW5lcmF0ZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgaGFuZGxlcjsiXSwibmFtZXMiOlsiaGFuZGxlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/images/generate.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fimages%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fimages%2Fgenerate.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();